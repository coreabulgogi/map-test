<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kakao Map - Multiple Markers</title>
    <script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=6956432726c3dc8f834ab6cf0dea4cd4"></script>
</head>
<body>

    <h1>프로-스펙스 매장현황(25.03기준)</h1>
    <div id="map" style="width:1000px;height:800px;"></div>

    <script>
        var container = document.getElementById('map'); 
        var options = {
            center: new kakao.maps.LatLng(36.4074, 128.1565), // 경북상주 좌표
            level: 12 // 지도 확대 레벨 (낮을수록 확대)
        };

        var map = new kakao.maps.Map(container, options); // 지도 생성

        // 마커 위치 리스트 (위도, 경도)
        var positions = [
            { title: "광주충장로직영점", latlng: new kakao.maps.LatLng(35.1492, 126.9146) },
            { title: "노원직영점", latlng: new kakao.maps.LatLng(37.6532, 127.0613) },
            { title: "군산수송직영점", latlng: new kakao.maps.LatLng(35.9684, 126.7151) },
            { title: "대구직영점", latlng: new kakao.maps.LatLng(35.8685, 128.5953) }, // 빨간색 마커
            { title: "목포직영점", latlng: new kakao.maps.LatLng(34.7906, 126.3844) }, // 파란색 마커
            { title: "구미직영점", latlng: new kakao.maps.LatLng(36.1285, 128.3317) },
            { title: "덕천직영점", latlng: new kakao.maps.LatLng(35.2106, 129.0064) }
        ];

        // 마커 색상별 이미지 URL
        var redMarker = "https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_red.png"; 
        var blueMarker = "https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_blue.png"; 

        // 마커 및 인포윈도우 저장할 배열
        var markers = [];

        // 마커 생성 및 지도에 표시
        positions.forEach(function(pos) {
            var markerImage = null; // 기본 마커 (null이면 카카오 기본 마커 사용)

            // 조건에 따라 마커 색상 변경
            if (pos.title === "대구직영점") {
                markerImage = new kakao.maps.MarkerImage(redMarker, new kakao.maps.Size(20, 40), { offset: new kakao.maps.Point(20, 40) });
            } else if (pos.title === "목포직영점") {
                markerImage = new kakao.maps.MarkerImage(blueMarker, new kakao.maps.Size(20, 40), { offset: new kakao.maps.Point(20, 40) });
            }

            var marker = new kakao.maps.Marker({
                map: map,
                position: pos.latlng,
                title: pos.title,
                image: markerImage // 기본 마커면 null로 둠 (카카오 기본 마커 사용)
            });

            var infowindow = new kakao.maps.InfoWindow({
                content: `<div style="padding:5px;">${pos.title}</div>` 
            });

            // 마커와 인포윈도우 상태를 저장하는 객체
            markers.push({
                marker: marker,
                infowindow: infowindow,
                isOpen: false
            });

            // 마커 클릭 시 인포윈도우 열고 닫기
            kakao.maps.event.addListener(marker, "click", function() {
                var markerData = markers.find(m => m.marker === marker);
                if (markerData.isOpen) {
                    markerData.infowindow.close();
                } else {
                    markerData.infowindow.open(map, marker);
                }
                markerData.isOpen = !markerData.isOpen; // 상태 반전
            });
        });

    </script>

</body>
</html>